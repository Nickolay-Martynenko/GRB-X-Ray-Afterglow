# Dataset & Related Utilities

## `./SwiftXRT`
Raw *Swift*-XRT GRB lightcurves repository data. See `./SwiftXRT/README.md` for a detailed discussion.

## `./utilities`
*Swift*-XRT data preprocessing utilities. These utilities either deal directly with the repository data stored at `./SwiftXRT` or use already preprocessed files.

#### `.../SwiftXRT_to_pickle.py`
Basic preprocessing script. Reads available datasets from `./SwiftXRT` and creates a dictionary of the found unique events. No additional preprocessing is applied. Example usage:
```
$ python3 ./utilities/SwiftXRT_to_pickle.py SwiftXRT SwiftXRT.pickle
```
The output would be:
```
[Processing]: PC_incbad
100%|██████████████████████████████████████████████████| 1577/1577 [00:05<00:00, 302.38it/s]
[Processing]: WT_incbad
100%|████████████████████████████████████████████████████| 867/867 [00:04<00:00, 205.28it/s]
Successfully processed 2444 json files. Found 1580 unique events
The result is stored at 'SwiftXRT.pickle'
```

#### `.../preprocessing.py` 
A more sophisticated preprocessing script. Reads the input file generated by the basic preprocessing script, reads the relevant information and applies padded rebinning of the lightcurves, together with decimal logarithm transformation and linear interpolation. By default, the minimal required number of non-empty bins is 8 out of 64, and only the confirmed GRB X-Ray lightcurves are included in the resulting dataset. The original basic lightcurve data is also retained, but this can be easily changed manually by setting the corresponding flag. Example usage:
```
$ python3 ./utilities/preprocessing.py SwiftXRT.pickle Dataset.pickle
```
The output would be:
```
[Processing]
100%|██████████████████████████████████████████████████| 1580/1580 [00:33<00:00, 47.36it/s]
Successfully processed 1580 events.
Found 1161 events satisfying the requirements. Filtered:
      1 event(s) - not a confirmed GRB
      0 event(s) - not enough timestamps
    418 event(s) - not enough non-empty bins
The result is stored at 'Dataset.pickle'
```

---
`./SwiftXRT.pickle`: the basic preprocessing output file generated by `./utilities/SwiftXRT_to_pickle.py` script. A dictionary, where the keys are the event names, and the values contain the corresponding lightcurves encoded as pandas dataframes.

---
`./Dataset.pickle`: the output file generated by `./utilities/preprocessing.py` script. A dictionary, where the keys are the event names, and the values contain the relevant preprocessed lightcurve information.
